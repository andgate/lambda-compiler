module Test

extern malloc : I32 -> I8*

extern free : I8* -> Void

extern memcpy : I8* -> I8* -> I32 -> I8*

extern puts : String -> I32

type MaybeInt
  = Nothing 
  | Just I32

nothing : MaybeInt
nothing = Nothing

just5 : MaybeInt*
just5 = new Just 5

main : I32 -> I8** -> I32
main argc argv
  = let hello = "Hello World"
        five = "5"
        may_5_ptr = just5
        may_5 = &may_5_ptr
        may_not = nothing
    in case may_not of
      Nothing -> puts hello
      Just c -> puts five
